/*!
 * rivet-core - @version 2.5.0
 *
 * Copyright (C) 2018 The Trustees of Indiana University
 * SPDX-License-Identifier: BSD-3-Clause
 * compiled as "sidenav" only
 */
function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var Rivet=function(t){"use strict";var e="rvt",n="function"==typeof Promise?Promise:function(t){var e,n=[],i=0;return t((function(t){e=t,i=1,n.splice(0).forEach(o)})),{then:o};function o(t){return i?setTimeout(t,0,e):n.push(t),this}},i=!0,o=!1,r="querySelectorAll";function s(t){this.observe(t,{subtree:i,childList:i})}var u="querySelectorAll",l=self,c=l.document,a=l.Element,h=l.MutationObserver,d=l.Set,f=l.WeakMap,g=function(t){return u in t},p=[].filter,v=Object.create,b=Object.keys,M=new WeakMap,_=new Set,y=[],m={},C={},T=function(t,e){for(var n=M.get(e),i=0,o=t.length;i<o;i++){var r=t[i],s=r.target,u=r.attributeName,l=r.oldValue,c=s.getAttribute(u);n.attributeChanged(u,l,c)}},A=function(t){var e=new f,n=function(n,i){var o;if(i)for(var r,s=function(t){return t.matches||t.webkitMatchesSelector||t.msMatchesSelector}(n),u=0,l=v.length;u<l;u++)s.call(n,r=v[u])&&(e.has(n)||e.set(n,new d),(o=e.get(n)).has(r)||(o.add(r),t.handle(n,i,r)));else e.has(n)&&(o=e.get(n),e.delete(n),o.forEach((function(e){t.handle(n,i,e)})))},l=function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=0,o=t.length;i<o;i++)n(t[i],e)},v=t.query,b=t.root||c,M=function(t,e,n){var u=function e(n,o,s,u,l){for(var c=0,a=n.length;c<a;c++){var h=n[c];(l||r in h)&&(u?o.has(h)||(o.add(h),s.delete(h),t(h,u)):s.has(h)||(s.add(h),o.delete(h),t(h,u)),l||e(h[r]("*"),o,s,u,i))}},l=new(n||MutationObserver)((function(t){for(var e=new Set,n=new Set,r=0,s=t.length;r<s;r++){var l=t[r],c=l.addedNodes,a=l.removedNodes;u(a,e,n,o,o),u(c,e,n,i,o)}}));return l.add=s,l.add(e||document),l}(n,b,h),_=a.prototype.attachShadow;return _&&(a.prototype.attachShadow=function(t){var e=_.call(this,t);return M.add(e),e}),v.length&&l(b[u](v)),{drop:function(t){for(var n=0,i=t.length;n<i;n++)e.delete(t[n])},flush:function(){for(var t=M.takeRecords(),e=0,n=t.length;e<n;e++)l(p.call(t[e].removedNodes,g),!1),l(p.call(t[e].addedNodes,g),!0)},observer:M,parse:l}}({query:y,handle:function(t,e,n){var i=m[n],o=i.m,r=i.l,s=i.o,u=o.get(t)||function(t,e,n,i){for(var o=v(i,{element:{enumerable:!0,value:t}}),r=0,s=n.length;r<s;r++)t.addEventListener(n[r].t,o,n[r].o);e.set(t,o),o.init&&o.init();var u=i.observedAttributes;if(u){var l=new MutationObserver(T);l.observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:u.map((function(e){return t.hasAttribute(e)&&o.attributeChanged(e,null,t.getAttribute(e)),e}))}),M.set(l,o)}return o}(t,o,r,s),l=e?"connected":"disconnected";l in u&&u[l]()}}),O=(A.drop,A.flush),S=A.parse,E=function(t){if(!(t in C)){var e,i=new n((function(t){e=t}));C[t]={_:e,$:i}}return C[t].$},w=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"initAll",value:function(){this.init(this.selector)}},{key:"init",value:function(t){return function(t,e){if(-1<y.indexOf(t))throw new Error("duplicated: "+t);O();for(var n=[],i=v(null),o=b(e),r=0,s=o.length;r<s;r++){var u=o[r];if(/^on/.test(u)&&!/Options$/.test(u)){var l=e[u+"Options"]||!1,c=u.toLowerCase(),a=c.slice(2);n.push({t:a,o:l}),i[a]=u,c!==u&&(a=u.slice(2,3).toLowerCase()+u.slice(3),i[a]=u,n.push({t:a,o:l}))}}n.length&&(e.handleEvent=function(t){this[i[t.type]](t)}),y.push(t),m[t]={m:new WeakMap,l:n,o:e},S(document.querySelectorAll(t)),E(t),_.has(t)||C[t]._()}(t,this.methods),document.querySelector(t)}},{key:"selector",get:function(){}},{key:"methods",get:function(){}},{key:"bindMethodToDOMElement",value:function(t,e,n){Object.defineProperty(t.element,e,{value:n.bind(t),writable:!1})}},{key:"dispatchCustomEvent",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e,r=new CustomEvent("".concat(o).concat(t),{bubbles:!0,cancelable:!0,detail:i});return n.dispatchEvent(r)}},{key:"dispatchComponentAddedEvent",value:function(t){return this.dispatchCustomEvent("ComponentAdded",document,{component:t})}},{key:"dispatchComponentRemovedEvent",value:function(t){return this.dispatchCustomEvent("ComponentRemoved",document,{component:t})}},{key:"watchForDOMChanges",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.observer=new MutationObserver((function(n,i){t._initElements(),e&&e()})),t.observer.observe(t.element,{childList:!0,subtree:!0})}},{key:"stopWatchingForDOMChanges",value:function(t){t.observer.disconnect()}},{key:"generateUniqueId",value:function(){return e+"-"+Math.random().toString(20).substr(2,12)}},{key:"setAttributeIfNotSpecified",value:function(t,e,n){t.getAttribute(e)||t.setAttribute(e,n)}}]),t}(),k=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,null,[{key:"selector",get:function(){return"[data-rvt-sidenav]"}},{key:"methods",get:function(){return{init:function(){this._initSelectors(),this._initElements(),this._initAttributes(),this._setInitialChildMenuStates(),w.bindMethodToDOMElement(this,"open",this.open),w.bindMethodToDOMElement(this,"close",this.close)},_initSelectors:function(){this.toggleAttribute="data-rvt-sidenav-toggle",this.childMenuAttribute="data-rvt-sidenav-list",this.toggleSelector="[".concat(this.toggleAttribute,"]"),this.childMenuSelector="[".concat(this.childMenuAttribute,"]")},_initElements:function(){this.childMenuToggleButtons=Array.from(this.element.querySelectorAll(this.toggleSelector)),this.childMenus=Array.from(this.element.querySelectorAll(this.childMenuSelector))},_initAttributes:function(){this._assignComponentElementIds()},_assignComponentElementIds:function(){this._assignToggleIds(),this._assignChildMenuIds()},_assignToggleIds:function(){var t=this;this.childMenuToggleButtons.forEach((function(e){w.setAttributeIfNotSpecified(e,t.toggleAttribute,w.generateUniqueId())}))},_assignChildMenuIds:function(){for(var t=this.childMenus.length,e=0;e<t;e++){var n=this.childMenuToggleButtons[e],i=this.childMenus[e],o=n.getAttribute(this.toggleAttribute);w.setAttributeIfNotSpecified(i,this.childMenuAttribute,o)}},_setInitialChildMenuStates:function(){this._setChildMenuDefaultAriaAttributes(),this._shouldOpenAllChildMenus()?this._openAllChildMenus():this._setChildMenuDefaultStates()},_setChildMenuDefaultAriaAttributes:function(){this.childMenuToggleButtons.forEach((function(t){return t.setAttribute("aria-haspopup","true")}))},_shouldOpenAllChildMenus:function(){return this.element.hasAttribute("data-rvt-sidenav-open-all")},_openAllChildMenus:function(){var t=this;this.childMenuToggleButtons.forEach((function(e,n){e.setAttribute("aria-expanded","true"),t.childMenus[n].removeAttribute("hidden")}))},_setChildMenuDefaultStates:function(){var t=this;this.childMenuToggleButtons.forEach((function(e,n){"true"===e.getAttribute("aria-expanded")?t.childMenus[n].removeAttribute("hidden"):(e.setAttribute("aria-expanded","false"),t.childMenus[n].setAttribute("hidden",""))}))},connected:function(){w.dispatchComponentAddedEvent(this.element),w.watchForDOMChanges(this)},disconnected:function(){w.dispatchComponentRemovedEvent(this.element),w.stopWatchingForDOMChanges(this)},onClick:function(t){this._clickOriginatedInChildMenuToggleButton(t)&&(this._setChildMenuToToggle(t),this._childMenuToToggleExists()&&(this._childMenuToToggleIsOpen()?this.close(this.childMenuToToggleId):this.open(this.childMenuToToggleId)))},_clickOriginatedInChildMenuToggleButton:function(t){return t.target.closest(this.toggleSelector)},_setChildMenuToToggle:function(t){this.childMenuToToggleId=t.target.closest(this.toggleSelector).dataset.rvtSidenavToggle,this.childMenuToToggle=this.element.querySelector("[".concat(this.childMenuAttribute,' = "').concat(this.childMenuToToggleId,'"]'))},_childMenuToToggleExists:function(){return this.childMenuToToggle&&""!==this.childMenuToToggle.getAttribute(this.childMenuAttribute)},_childMenuToToggleIsOpen:function(){return!this.childMenuToToggle.hasAttribute("hidden")},open:function(t){this._setChildMenuToOpen(t),this._childMenuExists(t)?this._eventDispatched("SidenavListOpened",this.childMenuToOpen)&&this._openChildMenu():console.warn("No such subnav child menu '".concat(t,"' in open()"))},_setChildMenuToOpen:function(t){this.childMenuToOpenToggleButton=this.element.querySelector("[".concat(this.toggleAttribute,' = "').concat(t,'"]')),this.childMenuToOpen=this.element.querySelector("[".concat(this.childMenuAttribute,' = "').concat(t,'"]'))},_openChildMenu:function(){this.childMenuToOpenToggleButton.setAttribute("aria-expanded","true"),this.childMenuToOpen.removeAttribute("hidden")},close:function(t){this._setChildMenuToClose(t),this._childMenuExists(t)?this._eventDispatched("SidenavListClosed",this.childMenuToClose)&&this._closeChildMenu():console.warn("No such subnav child menu '".concat(t,"' in close()"))},_setChildMenuToClose:function(t){this.childMenuToCloseToggleButton=this.element.querySelector("[".concat(this.toggleAttribute,' = "').concat(t,'"]')),this.childMenuToClose=this.element.querySelector("[".concat(this.childMenuAttribute,' = "').concat(t,'"]'))},_closeChildMenu:function(){this.childMenuToCloseToggleButton.setAttribute("aria-expanded","false"),this.childMenuToClose.setAttribute("hidden","")},_childMenuExists:function(t){var e=this.element.querySelector("[".concat(this.toggleAttribute,' = "').concat(t,'"]')),n=this.element.querySelector("[".concat(this.childMenuAttribute,' = "').concat(t,'"]'));return e&&n},_eventDispatched:function(t,e){return w.dispatchCustomEvent(t,this.element,{list:e})}}}}]),n}(w);return t.Sidenav=k,t.init=function(){k.initAll()},Object.defineProperty(t,"__esModule",{value:!0}),t}({});
